{"ast":null,"code":"import _objectSpread from\"/hdd1/Alejandro_02/cursos/UTNBA-FullStackDev/proyecto-final-front/linea_03/r-image/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/hdd1/Alejandro_02/cursos/UTNBA-FullStackDev/proyecto-final-front/linea_03/r-image/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/hdd1/Alejandro_02/cursos/UTNBA-FullStackDev/proyecto-final-front/linea_03/r-image/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/hdd1/Alejandro_02/cursos/UTNBA-FullStackDev/proyecto-final-front/linea_03/r-image/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useForm}from\"react-hook-form\";import{ReactComponent as Check}from'./check.svg';import{ReactComponent as Spin}from'./spin.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ContactForm(){var _useState=useState(3),_useState2=_slicedToArray(_useState,2),sended=_useState2[0],setSended=_useState2[1];var _useForm=useForm(\"\"),register=_useForm.register,errors=_useForm.formState.errors,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset;var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var response,jsonData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setSended(2);_context.next=4;return fetch(process.env.REACT_APP_FORM_SUBMIT_URL,{method:'post',body:JSON.stringify(data),headers:{'Accept':'application/json'}});case 4:response=_context.sent;_context.next=7;return response.json();case 7:jsonData=_context.sent;setSended(jsonData.ok==true?true:false);reset();_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);setSended(false);reset();case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var showStatus=false;var showError=function showError(){if(showStatus){return false;}else{showStatus=true;return true;}};useEffect(function(){showStatus=false;});var errorMessage=function errorMessage(error,type,message){return(error===null||error===void 0?void 0:error.type)===type&&showError()&&/*#__PURE__*/_jsx(\"p\",{className:\"errorText\",children:message});};return/*#__PURE__*/_jsxs(\"div\",{className:\"formContainer\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-secondary formTitle\",children:\"Contact Us\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),method:\"post\",className:\"formRegister\",children:[errorMessage(errors.fullName,'required','Full Name field is required'),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",placeholder:\" Full Name *\",maxLength:\"50\",id:\"fullName\"},register('fullName',{required:true,maxLength:50})),{},{className:\"input\"})),errorMessage(errors.email,'required','Email field is required'),errorMessage(errors.email,'pattern','Format is wrong'),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",placeholder:\" Email *\",maxLength:\"50\",id:\"email\"},register('email',{required:true,pattern:/^\\w+([.-_+]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,10})+$/,maxLength:50})),{},{className:\"input\"})),errorMessage(errors.message,'required','Message field is required'),/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({placeholder:\" Message *\",maxLength:\"300\",minLength:\"10\",cols:\"20\",rows:\"5\",id:\"message\"},register('message',{required:true,minLength:10,maxLength:300})),{},{className:\"input textarea\"})),/*#__PURE__*/_jsxs(\"label\",{className:\"submit \".concat(sended==true?'submitOk':sended==false?'submitFail':''),children:[/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"d-none\"}),sended==3?/*#__PURE__*/_jsx(\"p\",{children:\"Submit\"}):sended==2?/*#__PURE__*/_jsx(Spin,{className:\"spin\"}):sended==true?/*#__PURE__*/_jsx(Check,{className:\"check\"}):/*#__PURE__*/_jsx(\"p\",{className:\"sendedFail\",children:\"Something went wrong\"})]})]})]});};","map":{"version":3,"names":["React","useEffect","useState","useForm","ReactComponent","Check","Spin","ContactForm","sended","setSended","register","errors","formState","handleSubmit","reset","onSubmit","data","fetch","process","env","REACT_APP_FORM_SUBMIT_URL","method","body","JSON","stringify","headers","response","json","jsonData","ok","showStatus","showError","errorMessage","error","type","message","fullName","required","maxLength","email","pattern","minLength"],"sources":["/hdd1/Alejandro_02/cursos/UTNBA-FullStackDev/proyecto-final-front/linea_03/r-image/src/components/ContactForm/ContactForm.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport { ReactComponent as Check } from './check.svg'\nimport { ReactComponent as Spin } from './spin.svg'\n\nexport default function ContactForm() {\n    const [sended, setSended] = useState(3);\n    const { register, formState: { errors }, handleSubmit, reset } = useForm(\"\");\n\n    const onSubmit = async (data) => {\n        try {\n            setSended(2);\n            const response = await fetch(process.env.REACT_APP_FORM_SUBMIT_URL, {\n                method: 'post',\n                body: JSON.stringify(data),\n                headers: {\n                    'Accept': 'application/json'\n                }\n            });\n            const jsonData = await response.json();\n            setSended(jsonData.ok == true ? true : false);\n            reset();\n        } catch {\n            setSended(false);\n            reset();\n        }\n    }\n\n    let showStatus = false;\n    const showError = () => {\n        if (showStatus) {\n            return false;\n        } else {\n            showStatus = true;\n            return true;\n        }\n    }\n\n    useEffect(() => {\n        showStatus = false;\n    });\n\n    const errorMessage = (error, type, message) => error?.type === type && showError() && <p className=\"errorText\">{message}</p>;\n\n    return (\n        <div className='formContainer'>\n            <h3 className='text-secondary formTitle' >Contact Us</h3>\n            <form onSubmit={handleSubmit(onSubmit)} method=\"post\" className='formRegister'>\n                {errorMessage(errors.fullName, 'required', 'Full Name field is required')}\n                <input type=\"text\" placeholder=\" Full Name *\" maxLength=\"50\" id=\"fullName\" {...register('fullName', { required: true, maxLength: 50 })} className=\"input\" />\n                {errorMessage(errors.email, 'required', 'Email field is required')}\n                {errorMessage(errors.email, 'pattern', 'Format is wrong')}\n                <input type=\"text\" placeholder=\" Email *\" maxLength=\"50\" id=\"email\" {...register('email', { required: true, pattern: /^\\w+([.-_+]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,10})+$/, maxLength: 50 })} className=\"input\" />\n                {errorMessage(errors.message, 'required', 'Message field is required')}\n                <textarea placeholder=\" Message *\" maxLength=\"300\" minLength=\"10\" cols=\"20\" rows=\"5\" id=\"message\" {...register('message', { required: true, minLength: 10, maxLength: 300 })} className=\"input textarea\"></textarea>\n                <label className={`submit ${(sended == true) ? 'submitOk' : (sended == false) ? 'submitFail' : ''}`}>\n                    <input type=\"submit\" className='d-none' />\n                    {\n                        (sended == 3) ? <p>Submit</p> :\n                        (sended == 2) ? <Spin className='spin' /> :\n                        (sended == true) ? <Check className='check' /> :\n                        <p className='sendedFail'>Something went wrong</p>  \n                    }\n                </label>\n            </form>\n        </div>\n    );\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}